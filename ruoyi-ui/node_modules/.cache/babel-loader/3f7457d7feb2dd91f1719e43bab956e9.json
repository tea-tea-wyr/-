{"remainingRequest":"D:\\GitHub-fork\\Background-management-system-of-campus-activities\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\GitHub-fork\\Background-management-system-of-campus-activities\\ruoyi-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\GitHub-fork\\Background-management-system-of-campus-activities\\ruoyi-ui\\src\\store\\modules\\permission.js","dependencies":[{"path":"D:\\GitHub-fork\\Background-management-system-of-campus-activities\\ruoyi-ui\\src\\store\\modules\\permission.js","mtime":1610278952603},{"path":"D:\\GitHub-fork\\Background-management-system-of-campus-activities\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GitHub-fork\\Background-management-system-of-campus-activities\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\GitHub-fork\\Background-management-system-of-campus-activities\\ruoyi-ui\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi9HaXRIdWItZm9yay9CYWNrZ3JvdW5kLW1hbmFnZW1lbnQtc3lzdGVtLW9mLWNhbXB1cy1hY3Rpdml0aWVzL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiKTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gZXhwb3J0cy5sb2FkVmlldyA9IHZvaWQgMDsKCnZhciBfcm91dGVyID0gcmVxdWlyZSgiQC9yb3V0ZXIiKTsKCnZhciBfbWVudSA9IHJlcXVpcmUoIkAvYXBpL21lbnUiKTsKCnZhciBfaW5kZXggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvbGF5b3V0L2luZGV4IikpOwoKdmFyIF9QYXJlbnRWaWV3ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL2NvbXBvbmVudHMvUGFyZW50VmlldyIpKTsKCnZhciBwZXJtaXNzaW9uID0gewogIHN0YXRlOiB7CiAgICByb3V0ZXM6IFtdLAogICAgYWRkUm91dGVzOiBbXSwKICAgIHNpZGViYXJSb3V0ZXJzOiBbXQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfUk9VVEVTOiBmdW5jdGlvbiBTRVRfUk9VVEVTKHN0YXRlLCByb3V0ZXMpIHsKICAgICAgc3RhdGUuYWRkUm91dGVzID0gcm91dGVzOwogICAgICBzdGF0ZS5yb3V0ZXMgPSBfcm91dGVyLmNvbnN0YW50Um91dGVzLmNvbmNhdChyb3V0ZXMpOwogICAgfSwKICAgIFNFVF9TSURFQkFSX1JPVVRFUlM6IGZ1bmN0aW9uIFNFVF9TSURFQkFSX1JPVVRFUlMoc3RhdGUsIHJvdXRlcnMpIHsKICAgICAgc3RhdGUuc2lkZWJhclJvdXRlcnMgPSBfcm91dGVyLmNvbnN0YW50Um91dGVzLmNvbmNhdChyb3V0ZXJzKTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIC8vIOeUn+aIkOi3r+eUsQogICAgR2VuZXJhdGVSb3V0ZXM6IGZ1bmN0aW9uIEdlbmVyYXRlUm91dGVzKF9yZWYpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAvLyDlkJHlkI7nq6/or7fmsYLot6/nlLHmlbDmja4KICAgICAgICAoMCwgX21lbnUuZ2V0Um91dGVycykoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHZhciBzZGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEpKTsKICAgICAgICAgIHZhciByZGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEpKTsKICAgICAgICAgIHZhciBzaWRlYmFyUm91dGVzID0gZmlsdGVyQXN5bmNSb3V0ZXIoc2RhdGEpOwogICAgICAgICAgdmFyIHJld3JpdGVSb3V0ZXMgPSBmaWx0ZXJBc3luY1JvdXRlcihyZGF0YSwgdHJ1ZSk7CiAgICAgICAgICByZXdyaXRlUm91dGVzLnB1c2goewogICAgICAgICAgICBwYXRoOiAnKicsCiAgICAgICAgICAgIHJlZGlyZWN0OiAnLzQwNCcsCiAgICAgICAgICAgIGhpZGRlbjogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgICBjb21taXQoJ1NFVF9ST1VURVMnLCByZXdyaXRlUm91dGVzKTsKICAgICAgICAgIGNvbW1pdCgnU0VUX1NJREVCQVJfUk9VVEVSUycsIHNpZGViYXJSb3V0ZXMpOwogICAgICAgICAgcmVzb2x2ZShyZXdyaXRlUm91dGVzKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9OyAvLyDpgY3ljoblkI7lj7DkvKDmnaXnmoTot6/nlLHlrZfnrKbkuLLvvIzovazmjaLkuLrnu4Tku7blr7nosaEKCmZ1bmN0aW9uIGZpbHRlckFzeW5jUm91dGVyKGFzeW5jUm91dGVyTWFwKSB7CiAgdmFyIGlzUmV3cml0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgcmV0dXJuIGFzeW5jUm91dGVyTWFwLmZpbHRlcihmdW5jdGlvbiAocm91dGUpIHsKICAgIGlmIChpc1Jld3JpdGUgJiYgcm91dGUuY2hpbGRyZW4pIHsKICAgICAgcm91dGUuY2hpbGRyZW4gPSBmaWx0ZXJDaGlsZHJlbihyb3V0ZS5jaGlsZHJlbik7CiAgICB9CgogICAgaWYgKHJvdXRlLmNvbXBvbmVudCkgewogICAgICAvLyBMYXlvdXQgUGFyZW50VmlldyDnu4Tku7bnibnmrorlpITnkIYKICAgICAgaWYgKHJvdXRlLmNvbXBvbmVudCA9PT0gJ0xheW91dCcpIHsKICAgICAgICByb3V0ZS5jb21wb25lbnQgPSBfaW5kZXguZGVmYXVsdDsKICAgICAgfSBlbHNlIGlmIChyb3V0ZS5jb21wb25lbnQgPT09ICdQYXJlbnRWaWV3JykgewogICAgICAgIHJvdXRlLmNvbXBvbmVudCA9IF9QYXJlbnRWaWV3LmRlZmF1bHQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcm91dGUuY29tcG9uZW50ID0gbG9hZFZpZXcocm91dGUuY29tcG9uZW50KTsKICAgICAgfQogICAgfQoKICAgIGlmIChyb3V0ZS5jaGlsZHJlbiAhPSBudWxsICYmIHJvdXRlLmNoaWxkcmVuICYmIHJvdXRlLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICByb3V0ZS5jaGlsZHJlbiA9IGZpbHRlckFzeW5jUm91dGVyKHJvdXRlLmNoaWxkcmVuLCByb3V0ZSwgaXNSZXdyaXRlKTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9KTsKfQoKZnVuY3Rpb24gZmlsdGVyQ2hpbGRyZW4oY2hpbGRyZW5NYXApIHsKICB2YXIgY2hpbGRyZW4gPSBbXTsKICBjaGlsZHJlbk1hcC5mb3JFYWNoKGZ1bmN0aW9uIChlbCwgaW5kZXgpIHsKICAgIGlmIChlbC5jaGlsZHJlbiAmJiBlbC5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgaWYgKGVsLmNvbXBvbmVudCA9PT0gJ1BhcmVudFZpZXcnKSB7CiAgICAgICAgZWwuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYykgewogICAgICAgICAgYy5wYXRoID0gZWwucGF0aCArICcvJyArIGMucGF0aDsKCiAgICAgICAgICBpZiAoYy5jaGlsZHJlbiAmJiBjLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgICAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLmNvbmNhdChmaWx0ZXJDaGlsZHJlbihjLmNoaWxkcmVuLCBjKSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBjaGlsZHJlbi5wdXNoKGMpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfQoKICAgIGNoaWxkcmVuID0gY2hpbGRyZW4uY29uY2F0KGVsKTsKICB9KTsKICByZXR1cm4gY2hpbGRyZW47Cn0KCnZhciBsb2FkVmlldyA9IGZ1bmN0aW9uIGxvYWRWaWV3KHZpZXcpIHsKICAvLyDot6/nlLHmh5LliqDovb0KICByZXR1cm4gZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgIHJldHVybiByZXF1aXJlKFsiQC92aWV3cy8iLmNvbmNhdCh2aWV3KV0sIHJlc29sdmUpOwogIH07Cn07CgpleHBvcnRzLmxvYWRWaWV3ID0gbG9hZFZpZXc7CnZhciBfZGVmYXVsdCA9IHBlcm1pc3Npb247CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Ow=="},{"version":3,"sources":["D:/GitHub-fork/Background-management-system-of-campus-activities/ruoyi-ui/src/store/modules/permission.js"],"names":["permission","state","routes","addRoutes","sidebarRouters","mutations","SET_ROUTES","constantRoutes","concat","SET_SIDEBAR_ROUTERS","routers","actions","GenerateRoutes","commit","Promise","resolve","then","res","sdata","JSON","parse","stringify","data","rdata","sidebarRoutes","filterAsyncRouter","rewriteRoutes","push","path","redirect","hidden","asyncRouterMap","isRewrite","filter","route","children","filterChildren","component","Layout","ParentView","loadView","length","childrenMap","forEach","el","index","c","view","require"],"mappings":"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","sourcesContent":["import { constantRoutes } from '@/router'\r\nimport { getRouters } from '@/api/menu'\r\nimport Layout from '@/layout/index'\r\nimport ParentView from '@/components/ParentView';\r\n\r\nconst permission = {\r\n  state: {\r\n    routes: [],\r\n    addRoutes: [],\r\n    sidebarRouters: []\r\n  },\r\n  mutations: {\r\n    SET_ROUTES: (state, routes) => {\r\n      state.addRoutes = routes\r\n      state.routes = constantRoutes.concat(routes)\r\n    },\r\n    SET_SIDEBAR_ROUTERS: (state, routers) => {\r\n      state.sidebarRouters = constantRoutes.concat(routers)\r\n    },\r\n  },\r\n  actions: {\r\n    // 生成路由\r\n    GenerateRoutes({ commit }) {\r\n      return new Promise(resolve => {\r\n        // 向后端请求路由数据\r\n        getRouters().then(res => {\r\n          const sdata = JSON.parse(JSON.stringify(res.data))\r\n          const rdata = JSON.parse(JSON.stringify(res.data))\r\n          const sidebarRoutes = filterAsyncRouter(sdata)\r\n          const rewriteRoutes = filterAsyncRouter(rdata, true)\r\n          rewriteRoutes.push({ path: '*', redirect: '/404', hidden: true })\r\n          commit('SET_ROUTES', rewriteRoutes)\r\n          commit('SET_SIDEBAR_ROUTERS', sidebarRoutes)\r\n          resolve(rewriteRoutes)\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n// 遍历后台传来的路由字符串，转换为组件对象\r\nfunction filterAsyncRouter(asyncRouterMap, isRewrite = false) {\r\n  return asyncRouterMap.filter(route => {\r\n    if (isRewrite && route.children) {\r\n      route.children = filterChildren(route.children)\r\n    }\r\n    if (route.component) {\r\n      // Layout ParentView 组件特殊处理\r\n      if (route.component === 'Layout') {\r\n        route.component = Layout\r\n      } else if (route.component === 'ParentView') {\r\n        route.component = ParentView\r\n      } else {\r\n        route.component = loadView(route.component)\r\n      }\r\n    }\r\n    if (route.children != null && route.children && route.children.length) {\r\n      route.children = filterAsyncRouter(route.children, route, isRewrite)\r\n    }\r\n    return true\r\n  })\r\n}\r\n\r\nfunction filterChildren(childrenMap) {\r\n  var children = []\r\n  childrenMap.forEach((el, index) => {\r\n    if (el.children && el.children.length) {\r\n      if (el.component === 'ParentView') {\r\n        el.children.forEach(c => {\r\n          c.path = el.path + '/' + c.path\r\n          if (c.children && c.children.length) {\r\n            children = children.concat(filterChildren(c.children, c))\r\n            return\r\n          }\r\n          children.push(c)\r\n        })\r\n        return\r\n      }\r\n    }\r\n    children = children.concat(el)\r\n  })\r\n  return children\r\n}\r\n\r\nexport const loadView = (view) => { // 路由懒加载\r\n  return (resolve) => require([`@/views/${view}`], resolve)\r\n}\r\n\r\nexport default permission\r\n"]}]}